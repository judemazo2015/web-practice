<!DOCTYPE html>
<html>
    <head>
        <title>Practice</title>
        <style>
            #container {
                display: grid;
                height: 100vh;
                grid-template-rows: 30% 70%;
                grid-template-areas: 
                "panel1 panel1"
                "panel2 panel3"
                "panel2 panel3"
                ;
                border: solid 1px black;

            }
            .panel {
                border: blue solid 2px;
                border-radius: 15px;
                margin: 5px;
            }
            #panel1 {
                display: flex;
                flex-direction: column;
                align-items: center;
                font-size: 70px;
                text-shadow: 2px 3px 2px rgba(0, 0, 0, 0.5);
            }
            #panel2 {
                display: grid;
                grid-template-rows: 90% 10%;        ;
            }
            #main_b {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }
            #minor_b {
                display: flex;
                justify-self: center;
            }
            
            #panel3 {
                display: flex;
                flex-direction: column;
                align-items: center;
                padding-top: 10px;
                overflow-y: auto;
                font-family:'Courier New', Courier, monospace;
                font-weight: bolder;
            }

            #b3, #b4 {
                width: 100px;
                height: 50px;
                margin: 10px;
                border-radius: 10px;
            }
            #b1, #b2 {
                width: 50px;
                height: 20px;
                font-size: 10px;
                margin: 5px;
            }
        </style>
    </head>
    <body>
        <div id="container">
        <div id="panel1" class="panel" style="grid-area: panel1"><p id="p1">7</p></div>
        <div id="panel2" class="panel" style="grid-area: panel2">
            <div id="main_b">
                <button id="b3">PLAY</button>
                <button id="b4">RESET</button>
            </div>
            <div id="minor_b">
                <button id="b1">+</button>
                <button id="b2">-</button>
            </div>
            
            
        </div>
        <div id="panel3" class="panel" style="grid-area: panel3">
            <p>LOG:</p>

        </div>
        
        </div>
    </body>
    <script>
        let p1 = document.getElementById("p1");
        let b1 = document.getElementById("b1");
        let b2 = document.getElementById("b2");
        let b3 = document.getElementById("b3");
        let b4 = document.getElementById("b4");
        let buts = document.getElementsByTagName("button");
        let logPanel = document.getElementById("panel3");

        let num = 7;
        let count = 0;

        function showLog(sign, bonus_num) {
            count++;
            let newP = document.createElement("p");
            newP.textContent = `Move ${count}: ${sign}${bonus_num}`;
            if(sign == '+') newP.style.color = "green";
            else newP.style.color = "red";
            logPanel.appendChild(newP);
            logPanel.scrollTop = logPanel.scrollHeight;
        }

        function getRandomNum(max) {
            return Math.floor(Math.random() * max + 1);
        }

        function disableButts(start, end) {
             for(let i=start;i<end;i++) {
                if (i!=1) buts[i].disabled = true;
             }
        }

        function enableButts(start, end) {
             for(let i=start;i<end;i++) {
                if (i!=1) buts[i].disabled = false;
             }
        }

        function checkScore(num) {
            if (num >=15){
                p1.textContent = "YOU WIN!";
                p1.style.color = "green";
                disableButts(0, buts.length);
            }
            else if (num <=0){
                p1.textContent = "YOU LOSE.";
                p1.style.color = "red";
                disableButts(0, buts.length);
            }
        }

        b1.addEventListener("click", function() {
            num += 1;
            p1.textContent = num;
            checkScore(num);
            showLog("+", 1);
        })

        b2.addEventListener("click", function() {
            num -=1;
            p1.textContent = num;
            checkScore(num);
            showLog("-", 1);
        })

        b3.addEventListener("click", function () {
            let minus_plus = getRandomNum(10);
            let bonus_num = getRandomNum(3);
            let sign = "+";
            
            if(minus_plus >= 1 && minus_plus <=4){
                num += bonus_num;
                sign = "+";
            }
            else{
                num -= bonus_num;
                sign = "-";
            }

            p1.textContent = num;
            showLog(sign, bonus_num);
            checkScore(num);
        })

        b4.addEventListener("click", function() {
            num = 7;
            p1.textContent = num;
            p1.style.color = "black";
            enableButts(0, buts.length);
            logPanel.innerHTML = "<p>LOG:</p>";
            count = 0;
        })
    </script>
</html>